# 百度OCR快速配置指南（5分钟完成）

## 📌 重要说明

**v2.0已经把代码全部改好了！** 你只需要：
1. 注册百度云账号
2. 获取API密钥
3. 配置到.env.local文件
4. 启动项目

就这么简单！

---

## 🚀 第一步：注册百度智能云（2分钟）

### 1.1 访问网站
打开：https://cloud.baidu.com

### 1.2 注册账号
点击右上角"免费注册"，使用手机号或邮箱注册

### 1.3 实名认证（必须！）
- 注册后会提示进行实名认证
- 准备好身份证拍照
- 大约1-2分钟完成审核

**⚠️ 不完成实名认证无法使用API！**

---

## 🔑 第二步：获取API密钥（2分钟）

### 2.1 开通服务
登录后，在搜索框搜索：`文字识别`

或直接访问：https://cloud.baidu.com/product/ocr

点击"立即使用"

### 2.2 领取免费资源
会看到多个OCR服务：
- ✅ **通用文字识别（高精度版）**：点击"领取免费资源"
- 每月免费500次，够用了

### 2.3 创建应用
1. 点击"应用列表" → "创建应用"
2. 填写：
   - 应用名称：随便填，比如"我的OCR工具"
   - 接口选择：勾选"通用文字识别（高精度版）"
   - 其他不填
3. 点击"立即创建"

### 2.4 复制密钥
创建成功后，你会看到：
```
API Key: xxxxxxxxxxxxxxxxxxxxxxxx
Secret Key: xxxxxxxxxxxxxxxxxxxxxxxx
```

**📋 把这两个密钥复制下来，马上要用！**

---

## ⚙️ 第三步：配置项目（1分钟）

### 3.1 找到配置文件
在项目根目录找到：`.env.local.example`

### 3.2 复制并重命名
复制这个文件，重命名为：`.env.local`

### 3.3 填入密钥
打开`.env.local`，找到这两行：

```bash
BAIDU_OCR_API_KEY=你的百度API_Key
BAIDU_OCR_SECRET_KEY=你的百度Secret_Key
```

把刚才复制的密钥粘贴进去，例如：

```bash
BAIDU_OCR_API_KEY=A1B2C3D4E5F6G7H8I9J0K1L2M3N4O5P6
BAIDU_OCR_SECRET_KEY=Z9Y8X7W6V5U4T3S2R1Q0P9O8N7M6L5K4
```

**注意**：
- 不要有空格
- 不要有引号
- 确保密钥完整（通常很长）

### 3.4 配置Supabase（如果还没配置）
同一个文件里，还需要配置Supabase：

```bash
NEXT_PUBLIC_SUPABASE_URL=你的supabase项目URL
NEXT_PUBLIC_SUPABASE_ANON_KEY=你的supabase匿名密钥
```

这两个从Supabase项目的设置里获取。

---

## ✅ 第四步：启动测试（30秒）

### 4.1 安装依赖（如果还没安装）
```bash
npm install
```

### 4.2 启动项目
```bash
npm run dev
```

### 4.3 打开浏览器
访问：http://localhost:3000

### 4.4 测试识别
1. 上传一张包含文字的图片
2. 点击"开始识别"
3. 看到识别结果 → **配置成功！** 🎉

如果出现错误，查看下面的"常见问题"部分。

---

## ❓ 常见问题

### Q1: 提示"系统配置错误"
**原因**：没有配置百度API密钥

**解决**：
1. 检查`.env.local`文件是否存在
2. 检查文件名是否正确（是`.env.local`不是`.env.local.example`）
3. 检查密钥是否复制完整
4. 重启项目：关闭终端，重新运行`npm run dev`

### Q2: 提示"Access Token无效"
**原因**：API密钥填写错误

**解决**：
1. 回到百度云控制台，重新复制密钥
2. 确保API Key和Secret Key没有搞反
3. 确保密钥没有多余的空格或换行

### Q3: 提示"未完成实名认证"
**原因**：百度账号没有实名认证

**解决**：
1. 登录百度云
2. 右上角头像 → 账号信息
3. 完成实名认证

### Q4: 提示"调用次数超限"
**原因**：超出免费额度（500次/月）

**解决**：
- 等待下个月（自动刷新）
- 或者充值购买（按量付费，很便宜）

### Q5: 识别结果不准确
**建议**：
- 确保图片清晰
- 文字大小适中
- 光线充足
- 尽量使用横版图片

---

## 📊 费用说明

### 免费额度（每月）
- 通用文字识别：1000次
- 高精度版：**500次**（我们用的这个）
- 表格识别：50次
- 公式识别：50次

### 超出后的价格
- 0-1万次：0.015元/次（1.5分钱）
- 1万-10万次：0.010元/次（1分钱）

**示例**：
- 如果你每月识别1000次 → 前500次免费，后500次 = 500 × 0.015 = 7.5元

对比自己部署服务器的成本，这个价格非常划算。

---

## 🎯 代码改动说明

你关心的"代码改了哪里"：

### 只改了1个文件！
`app/api/ocr/route.ts`

###改动内容：
1. **删除了**：OCR.space的API调用代码
2. **新增了**：
   - 获取百度Access Token的代码
   - 调用百度OCR API的代码
   - 更详细的错误处理
   - 更友好的日志输出

### 没有改动的文件：
- ✅ 前端页面（page.tsx）- 完全不用改
- ✅ 数据库结构 - 完全不用改
- ✅ 其他API - 完全不用改

所以非常安全，不会影响现有功能！

---

## 📝 下一步

配置成功后，你可以：

1. **本地测试**：多测试几张图片，确保稳定
2. **部署到Vercel**：
   ```bash
   # 在Vercel项目设置中添加环境变量
   BAIDU_OCR_API_KEY=你的密钥
   BAIDU_OCR_SECRET_KEY=你的密钥
   ```
3. **监控使用量**：定期查看百度云控制台的调用次数

---

## 🆘 需要帮助？

如果还有问题，请检查：
1. 详细文档：`BAIDU_OCR_GUIDE.md`
2. 更新日志：`CHANGELOG_V2.md`
3. 项目README：`README.md`

---

**记住**：代码已经全部改好了，你只需要配置密钥就行！ 💪
